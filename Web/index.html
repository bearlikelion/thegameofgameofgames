<!doctype html>
<html lang="en">
  <head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.0/css/bootstrap.min.css" integrity="sha384-PDle/QlgIONtM1aqA2Qemk5gPOE7wFq8+Em+G/hmo5Iq0CCmYZLv3fVRDJ4MMwEA" crossorigin="anonymous">

	<title>The Game of Game of Games Leaderboards</title>

	<style type="text/css">
	.dreamloLBTable { border-collapse:collapse;text-align:center;width: 200px; }
	.dreamloLBTable th { border-bottom: 1px solid #EEEEEE;font-weight:bold;margin:0;padding:4px; }
	.dreamloLBTable td { border-bottom: 1px solid#EEEEEE;margin:0;padding:4px; }
	</style>
  </head>
  <body>
	<div class="container">
		<h1><p class="text-center">The Game of Game of Games Leaderboard</p></h1>

		<table class="table">
		  <thead>
			<tr>	          
			  <th scope="col">Name</th>
			  <th scope="col">Correct</th>
			  <th scope="col">Speed</th>
			</tr>
		  </thead>
		  <tbody id="records_table">
		  </tbody>
		</table>

		<h2 class="loading"><p class="text-center">Loading</p></h2>
	</div>	  

	<!-- <script src="https://www.dreamlo.com/lb/5c5dd477b639870c248d3350/js" type="text/javascript"></script> -->

	<!-- Optional JavaScript -->
	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
	<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.0/js/bootstrap.min.js" integrity="sha384-7aThvCh9TypR7fIc2HV4O/nFMVCBwyIUKL8XCtKE+8xgCgl/PQGuFsvShjr74PBp" crossorigin="anonymous"></script>

	<script>
		(function($) {
		  var oKeyDeferredMap = {};
		   
		  function fnReadData(sKey) {
		    var sValue = window.localStorage.getItem(sKey);
		    return sValue ? JSON.parse(sValue) : sValue;
		  }
		   
		  function fnWriteData(sKey, oData) {
		    var sValue = JSON.stringify(oData);
		    window.localStorage.setItem(sKey, sValue);
		  }
		   
		  $.cachedAjaxPromise = function(sUrl, oAjaxOptions) {
		    var oDeferred = oKeyDeferredMap[sUrl];
		    var sValue;
		     
		    if (!oDeferred) {
		      oDeferred = new jQuery.Deferred();
		      oKeyDeferredMap[sUrl] = oDeferred;
		      sValue = fnReadData(sUrl);
		       
		      if (sValue) {
		        oDeferred.resolve(sValue);
		      }
		       
		      if (!oAjaxOptions) {
		        oAjaxOptions = {};
		      }
		       
		      $.extend(oAjaxOptions, {
		        error: function(oXHR, sTextStatus, sErrorThrown) {
		          console.log('customer info request failed: ' + sErrorThrown);
		          oDeferred.resolve(null);
		        },
		        success: function(oData) {
		          // making assumption that data is JSON
		          fnWriteData(sUrl, oData);
		          oDeferred.resolve(oData);
		        }
		      });
		       
		      $.ajax(sUrl, oAjaxOptions);
		    }
		     
		    return oDeferred.promise();
		  };
		}(jQuery));

		oPromise = $.cachedAjaxPromise('/someURL').done(function(data) {
  			$( ".loading" ).remove();
			$.each(data.dreamlo.leaderboard.entry, function(i, item) {
				console.log(item);
				var $tr = $('<tr>').append(
					$('<td>').text(item.text),
					$('<td>').text(item.score),
					$('<td>').text(item.seconds)
				).appendTo("#records_table");
			});
		});
	</script>
  </body>
</html>